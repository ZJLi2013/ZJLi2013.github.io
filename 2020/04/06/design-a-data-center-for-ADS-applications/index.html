<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="data center," />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="backgroundA system’s back end can be made up of a number of bare metal servers, data storage facilities, virtual machines, a security mechanism, and services, all built in conformance with a deploymen">
<meta name="keywords" content="data center">
<meta property="og:type" content="article">
<meta property="og:title" content="design a data center for ADS applications">
<meta property="og:url" content="http://yoursite.com/2020/04/06/design-a-data-center-for-ADS-applications/index.html">
<meta property="og:site_name" content="Serious Autonomous Vehicles">
<meta property="og:description" content="backgroundA system’s back end can be made up of a number of bare metal servers, data storage facilities, virtual machines, a security mechanism, and services, all built in conformance with a deploymen">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://msdnshared.blob.core.windows.net/media/2016/04/image_thumb601.png">
<meta property="og:image" content="https://d1o2okarmduwny.cloudfront.net/wp-content/uploads/2015/11/aws-bastion-host-1.png">
<meta property="og:image" content="https://d1o2okarmduwny.cloudfront.net/wp-content/uploads/2015/11/aws-bastion-host-3.png">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/1009737/201701/1009737-20170116004552494-794532203.png">
<meta property="og:image" content="https://images2015.cnblogs.com/blog/1009737/201701/1009737-20170116004801510-1392260872.png">
<meta property="og:image" content="http://docs.ceph.org.cn/_images/ditaa-2452ee22ef7d825a489a08e0b935453f2b06b0e6.png">
<meta property="og:image" content="https://upload-images.jianshu.io/upload_images/1401434-5216e7cf94351457.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/1200">
<meta property="og:updated_time" content="2020-04-06T08:58:48.314Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="design a data center for ADS applications">
<meta name="twitter:description" content="backgroundA system’s back end can be made up of a number of bare metal servers, data storage facilities, virtual machines, a security mechanism, and services, all built in conformance with a deploymen">
<meta name="twitter:image" content="https://msdnshared.blob.core.windows.net/media/2016/04/image_thumb601.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2020/04/06/design-a-data-center-for-ADS-applications/"/>





  <title>design a data center for ADS applications | Serious Autonomous Vehicles</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Serious Autonomous Vehicles</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/04/06/design-a-data-center-for-ADS-applications/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">design a data center for ADS applications</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-04-06T04:57:57-04:00">
                2020-04-06
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2020/04/06/design-a-data-center-for-ADS-applications/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2020/04/06/design-a-data-center-for-ADS-applications/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        <h2 id="background"><a href="#background" class="headerlink" title="background"></a>background</h2><p>A system’s back end can be made up of a number of bare metal servers, data storage facilities, virtual machines, a security mechanism, and services, all built in conformance with a deployment model, and all together responsible for providing a service.</p>
<h4 id="points-to-consider"><a href="#points-to-consider" class="headerlink" title="points to consider"></a>points to consider</h4><ul>
<li><p>it’s the primary authority and responsibility of the back end to provide a built-in security mechanism, traffic control and protocols.</p>
</li>
<li><p>a central server is responsible for managing and running the system, systematically reviewing the traffic and client request to make certain that everything is running smoothly.</p>
</li>
</ul>
<h2 id="service-viewport"><a href="#service-viewport" class="headerlink" title="service viewport"></a>service viewport</h2><h4 id="busniess-services"><a href="#busniess-services" class="headerlink" title="busniess services"></a>busniess services</h4><p>the most common busniess services or <code>application-as-a-service(aaas)</code> in ADS data center includes:</p>
<ul>
<li><p>massively scenario simualtion</p>
</li>
<li><p>open-loop re-play simulation </p>
</li>
<li><p>AI training </p>
</li>
<li><p>sensor data analysis</p>
</li>
<li><p>test driven algorithms dev</p>
</li>
</ul>
<h4 id="platform-as-a-service"><a href="#platform-as-a-service" class="headerlink" title="platform as a service"></a>platform as a service</h4><p>busniess services can be considered as the most abstract level services,  paas consider how to support the upper level needs. a few components are obvious:</p>
<ul>
<li><p>distributed data storage(aws s3, ceph)</p>
</li>
<li><p>massively data analysis(hadoop)</p>
</li>
<li><p>massively compute nodes(k8s/docker)</p>
</li>
<li><p>vdi server pool</p>
</li>
<li><p>sql</p>
</li>
<li><p>web server for end-user UI</p>
</li>
</ul>
<h4 id="IaaS"><a href="#IaaS" class="headerlink" title="IaaS"></a>IaaS</h4><p>to support PaaS, we need CPUs, GPUs, network, either in physical mode or virtual mode. the common private cloud vendor would suggest a general virtualization layer, to manage all resources in one shot. but there is always an balance between the easy manage and performance lost. </p>
<p>for large auto industry OEMs, no doubt <code>easy manage</code> is crucial. so it’s suggested to implement virtual layer(either vmware or customized kvm). if not, I wonder the self-maintainaince will be a disaster in future. </p>
<h2 id="security-in-cloud"><a href="#security-in-cloud" class="headerlink" title="security in cloud"></a>security in cloud</h2><h4 id="who-is-Cybersecurity-professional"><a href="#who-is-Cybersecurity-professional" class="headerlink" title="who is Cybersecurity professional"></a><a href="https://cloudacademy.com/blog/how-to-become-a-cybersecurity-professional/" target="_blank" rel="external">who is Cybersecurity professional</a></h4><p>the guy who provide security during the development stages of software systems, networks, and data centers. </p>
<p>must make security measures for any information by designing various defensive systems and strategies against intruders. </p>
<p> The specialist must create new defensive systems and protocols and report incidents. Granting permissions and privileges to authorized users is also their job.</p>
<p> The cybersecurity professional must maintain IT security controls documentation, recognize the security gaps, and prepare an action plan accordingly. </p>
<p> Cybersecurity professionals enable security in IT infrastructure, data, edge devices, and networks.</p>
<h4 id="Azure-Security-best-practices"><a href="#Azure-Security-best-practices" class="headerlink" title="Azure Security: best practices"></a><a href="https://cloudacademy.com/blog/azure-security-best-practices-you-need-to-know/" target="_blank" rel="external">Azure Security: best practices</a></h4><ul>
<li><p>control network access </p>
<p>   At this ring you typically find Firewall policies, Distributed Denial of Service (DDoS) prevention, Intrusion Detection and Intrusion Prevention systems (IDS/IPS), Web Content Filtering, and Vulnerability Management such as Network Anti-Malware, Application Controls, and Antivirus.</p>
<p>   The second ring is often a Network Security Group (or NSG) applied to the subnet. Network Security Groups allow you to filter network traffic to and from Azure resources in an Azure virtual network.</p>
<pre><code>all subnets in an Azure Virtual Network (VNet) can communicate freely. By using a network security group for network access control between subnets, you can establish a different security zone or role for each subnet. As such, all subnets should be associated with a properly configured Network Security Group. 

With a virtual server, there is a third ring which is a Network Security Group (NSG) applied to virtual machines network interfaces, 

avoid exposure to the internet with a dedicated WAN connection. Azure offers both site-to-site VPN and ExpressRoute for this purpose.
</code></pre></li>
</ul>
<ul>
<li>disable remote access (ssh/rdp) </li>
</ul>
<p>disable remote access to vm from internet. ssh/rdp only should be provided over a secure dedicated conenction using Just-In-time(JIT) vm access.</p>
<p> the Just-In-Time VM access policy configures at the NSG to lock down the virtual machines remote management ports. When an authorized user requires access to the VM, they will use Just-In-Time VM Access to request access for up to three hours. After the requested time has elapsed, Azure locks the management ports down to help reduce susceptibility to an attack.</p>
<ul>
<li>update vm</li>
</ul>
<p>You need to run antivirus and anti-malware. and requires system updates for VMs hosted in Azure</p>
<ul>
<li><p>safeguard sensitive data </p>
</li>
<li><p>enable encryption </p>
</li>
</ul>
<ul>
<li><a href="https://docs.microsoft.com/en-us/archive/blogs/azuresecurity/what-does-shared-responsibility-in-the-cloud-mean" target="_blank" rel="external">shared responsibility</a></li>
</ul>
<p><img src="https://msdnshared.blob.core.windows.net/media/2016/04/image_thumb601.png" alt="image"></p>
<h4 id="aws-security-instance-level-security"><a href="#aws-security-instance-level-security" class="headerlink" title="aws security: instance level security"></a><a href="https://cloudacademy.com/blog/aws-security-groups-instance-level-security/" target="_blank" rel="external">aws security: instance level security</a></h4><ul>
<li><p>AWS security groups, provides security at the protocol and port access level, working much the same way as a firewall – contains a set of rules that filter traffic coming in and out of an EC2 instance. </p>
</li>
<li><p>os security path management </p>
</li>
<li><p>key pairs(public and private key to login EC2 instance)</p>
</li>
</ul>
<h4 id="aws-security-network-ACL-and-subnets-network-level-security"><a href="#aws-security-network-ACL-and-subnets-network-level-security" class="headerlink" title="aws security: network ACL and subnets: network level security"></a><a href="https://cloudacademy.com/blog/aws-network-acl-vpc-subnets-network-security/" target="_blank" rel="external">aws security: network ACL and subnets: network level security</a></h4><h4 id="aws-security-bastion-hosts"><a href="#aws-security-bastion-hosts" class="headerlink" title="aws security: bastion hosts"></a><a href="https://cloudacademy.com/blog/aws-bastion-host-nat-instances-vpc-peering-security/" target="_blank" rel="external">aws security: bastion hosts</a></h4><p>the connectivity flowing from an end-user to resources on a private subnet through a bastion host: </p>
<p><img src="https://d1o2okarmduwny.cloudfront.net/wp-content/uploads/2015/11/aws-bastion-host-1.png" alt="image"></p>
<ul>
<li>updates to bastion host </li>
</ul>
<p>skip bastion if using Session Manager, to securely connect to private instance in virtual private cloud wthout needing bastion host or key-pairs</p>
<p>now push keys for short periods of time and use IAM policies to restrict access as you see fit. This reduces your compliance and audit footprint as well</p>
<ul>
<li>NAT(network address translation) [gateway] instance </li>
</ul>
<p>allows private instance outgoing connectivity to the internet while at the same time blocking inboud traffic from the internet </p>
<ul>
<li>VPC(virtual private cloud) peering </li>
</ul>
<p><img src="https://d1o2okarmduwny.cloudfront.net/wp-content/uploads/2015/11/aws-bastion-host-3.png" alt="image"></p>
<h4 id="aws-security-identity-and-access-management-IAM"><a href="#aws-security-identity-and-access-management-IAM" class="headerlink" title="aws security: identity and access management(IAM)"></a><a href="https://cloudacademy.com/blog/aws-security-identity-and-access-management-iam/" target="_blank" rel="external">aws security: identity and access management(IAM)</a></h4><p>governs and control user acces to VPC resoruces, it achieves the goal through Users/Group/Roles and Policies.</p>
<h2 id="network-topology-in-cloud"><a href="#network-topology-in-cloud" class="headerlink" title="network topology in cloud"></a>network topology in cloud</h2><h4 id="network-topology-at-first"><a href="#network-topology-at-first" class="headerlink" title="network topology at first"></a>network topology at first</h4><p>I would consider the data center network topology and security mechanism from the following four points:</p>
<ul>
<li>internal network topology</li>
</ul>
<p>basically the data center will have an internal network, to connect infrastructures, e.g. data storage nodes, k8s compute nodes, hadoop compute nodes, web server nodes,  vdi server nodes e.t.c.</p>
<ul>
<li>network gateway to end-users</li>
</ul>
<p>there should be a unique network gateway in data center, which is the only network IO for end-user access.</p>
<ul>
<li>network gateway to other private/public cloud</li>
</ul>
<p>we also need connect to other IT infrastructure, so needanother network gateway.</p>
<p>the two gateways above, can be either virtual gateway or physical gateway, depends on our hardware. e.g. vlan, bridge, or physical gateway</p>
<ul>
<li>admin pass-through network</li>
</ul>
<p>network gateway is the normal user access port, but for admin, specially for sysm management, trouble-shooting, e.t.c, we need a pass-through network, which basically directly connect to internal network of data center,<br>admin pass-through network is speed limited, so only for special admin usage.</p>
<h4 id="h3c-浅谈数据中心网络架构的发展"><a href="#h3c-浅谈数据中心网络架构的发展" class="headerlink" title="h3c: 浅谈数据中心网络架构的发展"></a><a href="http://www.h3c.com/CN/D_201405/826868_30008_0.htm" target="_blank" rel="external">h3c: 浅谈数据中心网络架构的发展</a></h4><ul>
<li>接入层，用于连接所有的计算节点，在较大规模的数据中心中，通常以柜顶交换机的形式存在；</li>
<li>汇聚层，用于接入层的互联，并作为该汇聚区域二三层的边界，同时各种防火墙、负载均衡等业务也部署于此；</li>
<li>核心层，用于汇聚层的的互联，并实现整个数据中心与外部网络的三层通信。</li>
</ul>
<p>传统的数据中心内，服务器主要用于对外提供业务访问，不同的业务通过安全分区及VLAN隔离。一个分区通常集中了该业务所需的计算、网络及存储资源，不同的分区之间或者禁止互访，或者经由核心交换通过三层网络交互，数据中心的网络流量大部分集中于南北向.</p>
<p>在这种设计下，不同分区间计算资源无法共享，资源利用率低下的问题越来越突出。通过虚拟化技术、云计算管理技术等，将各个分区间的资源进行池化，实现数据中心内资源的有效利用。而随着这些新技术的兴起和应用，新的业务需求如虚拟机迁移、数据同步、数据备份、协同计算等在数据中心内开始实现部署，数据中心内部东西向流量开始大幅度增加。</p>
<h4 id="h3c-two-layer-network-arch"><a href="#h3c-two-layer-network-arch" class="headerlink" title="h3c: two-layer network arch"></a><a href="http://www.h3c.com/cn/d_201010/697894_30008_0.htm" target="_blank" rel="external">h3c: two-layer network arch</a></h4><ul>
<li>网络三层互联，或称为，数据中心前端网络互联。“前端网络”，是指数据中心面向企业园区的出口。不同数据中心的前端网络通过ip实现互联，园区或分支的客户端通过前端网络访问各数据中心。</li>
</ul>
<ul>
<li><p>网络两层互联，或称为，数据中心服务器网络互联。在不同数据中心服务器网络接入层，构建一个跨数据中心的搭二层网络(vlan)，以满足服务器集群或虚拟机动态迁移等场景</p>
</li>
<li><p>san互联，也称为，后端存储网络互联。借助传输技术，实现主中心、灾备中心间磁盘阵列的数据复制</p>
</li>
</ul>
<p>二层互联的业务需求：保证服务器的高可用集群。</p>
<p>二层互联设计要点：面对中小企业客户（ip网络）</p>
<h4 id="openstack-neutron-network-for-cloud"><a href="#openstack-neutron-network-for-cloud" class="headerlink" title="openstack neutron: network for cloud"></a><a href="https://www.cnblogs.com/pmyewei/p/6280445.html" target="_blank" rel="external">openstack neutron: network for cloud</a></h4><ul>
<li>data flow in data center: </li>
</ul>
<ul>
<li><p>manage(API) network, basically the internal managed network</p>
</li>
<li><p>user network</p>
</li>
<li><p>external network, including vpn, firewall </p>
</li>
<li><p>storage network, connect from computing nodes to storage ndoes </p>
</li>
</ul>
<ul>
<li>NSX arch</li>
</ul>
<p><img src="https://images2015.cnblogs.com/blog/1009737/201701/1009737-20170116004552494-794532203.png" alt="image"></p>
<p>the left most part is computing nodes, for customers bussniess, the dataflow includes: user-network, storage, internal-network, all of which requires 3 NIC</p>
<p>the middle part is infrastructure, including managing nodes, shared storage, which brings IP based storage for the left most part.</p>
<p>the right edge part, is external(internet) network services for users, including network to users, as well as network to Internet, firewall, public IP address translation e.t.c.</p>
<p><img src="https://images2015.cnblogs.com/blog/1009737/201701/1009737-20170116004801510-1392260872.png" alt="image"></p>
<h4 id="ceph-subnets"><a href="#ceph-subnets" class="headerlink" title="ceph subnets"></a>ceph subnets</h4><p><img src="http://docs.ceph.org.cn/_images/ditaa-2452ee22ef7d825a489a08e0b935453f2b06b0e6.png" alt="image"></p>
<p>when consider ceph storage for k8s computing nodes, the public network also includes network switches to k8s, as well as normal user data access network switches.</p>
<ul>
<li><p>cluster network (Gb NIC, including osd and monitor)</p>
</li>
<li><p>ceph client(to k8s) network (gb)</p>
</li>
<li><p>ceph admin/user network(mb)</p>
</li>
</ul>
<h4 id="k8s-subnets"><a href="#k8s-subnets" class="headerlink" title="k8s subnets"></a>k8s subnets</h4><p><a href="https://zhuanlan.zhihu.com/p/90992878" target="_blank" rel="external">understand k8s network：pods, service, ingress</a></p>
<ul>
<li><p>pods, all containers in one pod, share the same network namespace. the network namespace of pod is different from that of the host machine, but the two is connected by <code>docker bridge</code> </p>
</li>
<li><p>services, handle the load balance among pods, as well as encapsulate the IPs of pods, so we don’t directly deal with the local dynamic IPs of pods.</p>
</li>
<li><p>how to access k8s service from exteral, or how user acces the k8s hosted in a remote data center?  <strong><a href="https://www.kuboard.cn/learning/k8s-intermediate/service/ingress.html#ingress" target="_blank" rel="external">ingress for k8s</a></strong></p>
</li>
</ul>
<p><img src="https://upload-images.jianshu.io/upload_images/1401434-5216e7cf94351457.jpg?imageMogr2/auto-orient/strip|imageView2/2/w/1200" alt="image"></p>
<p><a href="https://www.jianshu.com/p/ae2889daa0a5" target="_blank" rel="external">flannel</a><br> setup a two-layer network, the ip of pod is assigend by <code>flannel</code>, each node will has a <code>flannel0</code> virtual NIC, used for node-node communication. </p>
<h4 id="gpu-vdi-subnets"><a href="#gpu-vdi-subnets" class="headerlink" title="gpu vdi subnets"></a>gpu vdi subnets</h4><p>as mentioned in <a href="https://zjli2013.github.io/2020/04/02/gpu-vdi/" target="_blank" rel="external">gpu vdi</a>,  most solution has a customized vdi client, the vm manager internal network is handled by the vendors, maybe communicate through one Gb NIC, the client-server is simple TCP/ip.</p>
<h4 id="webserver-subnets"><a href="#webserver-subnets" class="headerlink" title="webserver subnets"></a>webserver subnets</h4><p>a few things in mind:</p>
<ul>
<li>using vm.</li>
</ul>
<p>web servers are better to deploy in vm, so whenever there is a hardware failure, it can detect and automatically transfer to another vm. </p>
<ul>
<li>communicate with in-house services </li>
</ul>
<p>in ADS data center, most web application need access data from either sql or even storage services directly, which means the web server need both external ingress services as well as handling internal IP access. </p>
<h4 id="network-manager"><a href="#network-manager" class="headerlink" title="network manager"></a>network manager</h4><p>the above subnet classification only consider each component itself, for a data center in whole, it’s better to manage all networks of internal subnets and access to external Internet in one module: network manager.</p>
<p>as mentioned in the previous section: <a href="">security in cloud</a>, the network manager module can further add some security mechanisms.  </p>
<h2 id="refere"><a href="#refere" class="headerlink" title="refere"></a>refere</h2><p><a href="https://cloudacademy.com/blog/cloud-computing-architecture-an-overview/" target="_blank" rel="external">cloud arch: front end &amp; back end</a></p>
<p><a href="https://cloudacademy.com/learning-paths/az-500-exam-preparation-microsoft-azure-security-technologies-650/" target="_blank" rel="external">Microsoft Azure security tech training courses</a></p>
<p><a href="https://cloudacademy.com/blog/foundation-certificate-in-cyber-security-fccs-learning-path/" target="_blank" rel="external">introduction the Foundation certificate in Cyber Security</a></p>
<p><a href="https://www2.cs.duke.edu/courses/fall10/cps296.2/lectures/16RoutingTopology.pdf" target="_blank" rel="external">datacenter network: topology and routing</a></p>
<p><a href="https://www.sdnlab.com/mininet-topology/" target="_blank" rel="external">miniNet for data center network topology</a></p>
<p><a href="https://www.cnblogs.com/pmyewei/p/6413875.html" target="_blank" rel="external">openstack neutron: two-layer network</a></p>

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/data-center/" rel="tag"># data center</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2020/04/02/gpu-vdi/" rel="next" title="gpu vdi">
                <i class="fa fa-chevron-left"></i> gpu vdi
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2020/04/09/redis-task-queue/" rel="prev" title="redis task queue">
                redis task queue <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            Overview
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="David Z.J. Lee" />
          <p class="site-author-name" itemprop="name">David Z.J. Lee</p>
           
              <p class="site-description motion-element" itemprop="description">what I don't know</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">193</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">51</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ZJLi2013" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/zhengjia13/" target="_blank" title="LinkedIn">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  LinkedIn
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#background"><span class="nav-number">1.</span> <span class="nav-text">background</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#points-to-consider"><span class="nav-number">1.0.1.</span> <span class="nav-text">points to consider</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#service-viewport"><span class="nav-number">2.</span> <span class="nav-text">service viewport</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#busniess-services"><span class="nav-number">2.0.1.</span> <span class="nav-text">busniess services</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#platform-as-a-service"><span class="nav-number">2.0.2.</span> <span class="nav-text">platform as a service</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IaaS"><span class="nav-number">2.0.3.</span> <span class="nav-text">IaaS</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#security-in-cloud"><span class="nav-number">3.</span> <span class="nav-text">security in cloud</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#who-is-Cybersecurity-professional"><span class="nav-number">3.0.1.</span> <span class="nav-text">who is Cybersecurity professional</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Azure-Security-best-practices"><span class="nav-number">3.0.2.</span> <span class="nav-text">Azure Security: best practices</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#aws-security-instance-level-security"><span class="nav-number">3.0.3.</span> <span class="nav-text">aws security: instance level security</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#aws-security-network-ACL-and-subnets-network-level-security"><span class="nav-number">3.0.4.</span> <span class="nav-text">aws security: network ACL and subnets: network level security</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#aws-security-bastion-hosts"><span class="nav-number">3.0.5.</span> <span class="nav-text">aws security: bastion hosts</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#aws-security-identity-and-access-management-IAM"><span class="nav-number">3.0.6.</span> <span class="nav-text">aws security: identity and access management(IAM)</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#network-topology-in-cloud"><span class="nav-number">4.</span> <span class="nav-text">network topology in cloud</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#network-topology-at-first"><span class="nav-number">4.0.1.</span> <span class="nav-text">network topology at first</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#h3c-浅谈数据中心网络架构的发展"><span class="nav-number">4.0.2.</span> <span class="nav-text">h3c: 浅谈数据中心网络架构的发展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#h3c-two-layer-network-arch"><span class="nav-number">4.0.3.</span> <span class="nav-text">h3c: two-layer network arch</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#openstack-neutron-network-for-cloud"><span class="nav-number">4.0.4.</span> <span class="nav-text">openstack neutron: network for cloud</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ceph-subnets"><span class="nav-number">4.0.5.</span> <span class="nav-text">ceph subnets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#k8s-subnets"><span class="nav-number">4.0.6.</span> <span class="nav-text">k8s subnets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#gpu-vdi-subnets"><span class="nav-number">4.0.7.</span> <span class="nav-text">gpu vdi subnets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#webserver-subnets"><span class="nav-number">4.0.8.</span> <span class="nav-text">webserver subnets</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#network-manager"><span class="nav-number">4.0.9.</span> <span class="nav-text">network manager</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#refere"><span class="nav-number">5.</span> <span class="nav-text">refere</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David Z.J. Lee</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://zjlee.disqus.com/count.js" async></script>
    

    
      <script type="text/javascript">
        var disqus_config = function () {
          this.page.url = 'http://yoursite.com/2020/04/06/design-a-data-center-for-ADS-applications/';
          this.page.identifier = '2020/04/06/design-a-data-center-for-ADS-applications/';
          this.page.title = 'design a data center for ADS applications';
        };
        var d = document, s = d.createElement('script');
        s.src = 'https://zjlee.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      </script>
    

  




	





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

</body>
</html>
