<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.1" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.1" />






<meta name="description" content="what I don&apos;t know">
<meta property="og:type" content="website">
<meta property="og:title" content="Serious Autonomous Vehicles">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Serious Autonomous Vehicles">
<meta property="og:description" content="what I don&apos;t know">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Serious Autonomous Vehicles">
<meta name="twitter:description" content="what I don&apos;t know">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":0,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Serious Autonomous Vehicles</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Serious Autonomous Vehicles</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            Tags
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />
            
            Search
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/28/paper-reading-distributed-simulation-platform-for-autonomous-driving/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/28/paper-reading-distributed-simulation-platform-for-autonomous-driving/" itemprop="url">paper reading-distributed simulation platform for autonomous driving</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-28T01:21:13-04:00">
                2019-03-28
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/28/paper-reading-distributed-simulation-platform-for-autonomous-driving/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/28/paper-reading-distributed-simulation-platform-for-autonomous-driving/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>to test newly developed algorithms, due to the massive amount of simulation data, need a distributed simulation platform based on Spark distributed framework.</p>
<ul>
<li><p>simulation based on synthetic data, used in control and planning </p>
</li>
<li><p>simulation based on real data playback, used to test function and performance of different components</p>
</li>
</ul>
<p>in autonomous driving system, each functional module in ROS is deployed as a node, the communication between nodes rely on the messages with well-defined formats. so the test of each module is independent, we can develop simulation module for each functional module. </p>
<h2 id="anatomy-of-simulator"><a href="#anatomy-of-simulator" class="headerlink" title="anatomy of simulator"></a>anatomy of simulator</h2><p>there should be a dynamic model of the car, a vehicle dynamic model;  then the external environment is needed, which includes static and dynamic scenes.</p>
<p>the simulator can decompose external environment into basic elements, and rearranges the combination to generate a variety of test cases, each simulating a specific scenario. </p>
<p>e.g. the position, speed, next step command of the barrier vehicle can give different basic elements. </p>
<h2 id="ROS-based-simulator"><a href="#ROS-based-simulator" class="headerlink" title="ROS based simulator"></a>ROS based simulator</h2><p>to use the real traffic data to reproduce the real scene requires a distributed simulation platform. </p>
<ul>
<li><p>ROSBAG, record from Topic and replay message to Topic. </p>
<p>  the Record function is to create a recording node in ROS, and call the subscribe method to receive ROS message to all Topics, and then write the message to Bag file. </p>
<p>  the Play function is to establish a play node, and call the advertise method to send message in bag to specified Topic. </p>
</li>
</ul>
<h2 id="Spark-distributed-platform"><a href="#Spark-distributed-platform" class="headerlink" title="Spark distributed platform"></a>Spark distributed platform</h2><p>the Spark driver launch different simulation applications, e.g. localization algorithms, object recoginization algorithms, vehicle decision-making and control algorithms etc, then allocate resources to each Spark worker, who first reads the RosBag data into memory and launches a ROS node to process the incoming data. </p>
<p>the interface between Spark and ROS is through Linux pipe, basically data written to the write end of the pipe is buffered by the kernel until it is read from the read end of the pipe.</p>
<p>two problems: 1) Spark only support text-based data consuming; 2) Spark memeory to ROBag </p>
<h3 id="Binary-data-streaming"><a href="#Binary-data-streaming" class="headerlink" title="Binary data streaming"></a>Binary data streaming</h3><p>the core Spark data structure is resilient distributed dataset (RDD). to process and transform binary data into a user-defined format and transform the output of Spark computation into a byte stream, even further to a generic binary file(HDFs)</p>
<pre><code>1) encode and serialize the binary files(image, lidar input data) to form a binary byte stream 

2) de-serialize and decode the binary stream, according to interpret byte stream into an understandable format and perform target computation

3) the output then be encoded and serialized before passed in RDD partitions(e.g. HDFs), and returned to Spark driver 
</code></pre><h3 id="data-retrieval-through-ROSbag-cache"><a href="#data-retrieval-through-ROSbag-cache" class="headerlink" title="data retrieval through ROSbag cache"></a>data retrieval through ROSbag cache</h3><p>two things: reading from memory through ROSbag play, and writing to memory through ROSbag record. </p>
<p>solution: design a memoryChunkedFile class, derived from ChuckedFile class, to read/write memory rather than files.</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/27/paper-reading-perception-planning-control-and-coordination-for-autonomous-vehicles/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/27/paper-reading-perception-planning-control-and-coordination-for-autonomous-vehicles/" itemprop="url">paper reading-perception, planning, control and coordination for autonomous vehicles</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-27T05:41:05-04:00">
                2019-03-27
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/27/paper-reading-perception-planning-control-and-coordination-for-autonomous-vehicles/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/27/paper-reading-perception-planning-control-and-coordination-for-autonomous-vehicles/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="Lidar-Perception"><a href="#Lidar-Perception" class="headerlink" title="Lidar Perception"></a>Lidar Perception</h2><ul>
<li><p>point cloud based approach, directly use the raw sensor data for further processing. usually applied a voxel-based filtering to reduce the number of points </p>
</li>
<li><p>feature based approach, extract parametric features out of the point cloud, and represent the environment usign extracted features (out of date)</p>
</li>
<li><p>grid based approach</p>
</li>
</ul>
<h3 id="segmentation-algorithms"><a href="#segmentation-algorithms" class="headerlink" title="segmentation algorithms"></a>segmentation algorithms</h3><p>cluster points into multiple homogeneous groups.</p>
<ul>
<li>edge based method</li>
<li>region based method, cluster neighborhood points based on certain criteria</li>
<li>model-based / parametric method,</li>
<li>graph based method </li>
</ul>
<h3 id="detection-algorithms"><a href="#detection-algorithms" class="headerlink" title="detection algorithms"></a>detection algorithms</h3><p>categorize each cluster into different objects, the information in each cluster is mainly from spatial relationship and Lidar intensity of the points. </p>
<h2 id="Vision"><a href="#Vision" class="headerlink" title="Vision"></a>Vision</h2><p>usually deal with road detection and on-road object detection. </p>
<h2 id="Road-Detection"><a href="#Road-Detection" class="headerlink" title="Road Detection"></a>Road Detection</h2><h3 id="lane-mark-detection"><a href="#lane-mark-detection" class="headerlink" title="lane mark detection"></a>lane mark detection</h3><ul>
<li><p>lane line feature extraction<br>basically identify the pixels that belong to lane line marks. </p>
</li>
<li><p>fitting the pixels into different models</p>
</li>
</ul>
<ul>
<li>estimate the vehicle pose(lateral position and moving orientation) based on the fitted model. </li>
</ul>
<h3 id="road-surface-detection"><a href="#road-surface-detection" class="headerlink" title="road surface detection"></a>road surface detection</h3><p>inform the self-driving car on the location of free space where it can drive without collision. usually three ways:</p>
<ul>
<li>feature based detection</li>
</ul>
<p>first identify the feature points or patches in the original image; based on the identified features, either model fitting or segmentation kind of algorithms will be applied to identify the road surfaces. </p>
<ul>
<li>feature based learning<br>first extract a set of features associated to pixels or image patches, then train a classifier based on the features to assign a road or non-road label to the pixels or patches</li>
</ul>
<ul>
<li>deep learning</li>
</ul>
<h3 id="on-road-object-detection"><a href="#on-road-object-detection" class="headerlink" title="on-road object detection"></a>on-road object detection</h3><p>mainly concerns vehicle and pedestrain object classes, and mainly with deep learning based approaches, whose pipeline usually like:</p>
<p>1) the proposal bounding boxes needs to be generated around the input image</p>
<p>2) each proposal box will be sent through the CNN network to determine a classification and fine tune its bounding box location </p>
<h2 id="Fusion"><a href="#Fusion" class="headerlink" title="Fusion"></a>Fusion</h2><p>sensor fusion betweeen Lidar and camera is necessary to make the best use of these devices and achive a robust environment perception result. </p>
<h2 id="Localization"><a href="#Localization" class="headerlink" title="Localization"></a>Localization</h2><p>the problem of estimating the ego vehicle’s pose, can divided into 2 sub-problems:  pose fixing problem and dead reckoning problem. </p>
<ul>
<li><p>pose fixing problem is to predict a measurement given a pose, e.g. a map. </p>
</li>
<li><p>dead reckoning problem, the state is related to the observation by a set of differential equations, and these equations has to be integrated in order to navigate. </p>
</li>
</ul>
<p>map aided localization algorithm use local features to achieve highly precise localization.  e.g. SLAM.</p>
<p>a key event in smoothing based SLAM is loop closure, basically when features that have not been seen for a while are observed again from the sensor readings. when a loop closure is detected, the error caused by imperfect odometry can then be removed, and a substantial portion of the map can be updated. </p>
<p>approaches to semantic mapping can be categorized into three ways:  object based, appearance based, and activity based. </p>
<ul>
<li><p>appearance based semantic mapping, interpret sensor readings to construct semantic information of the environment</p>
</li>
<li><p>object based semantic mapping, use the occurrence of key objects to build a semantic understanding of the environments, where object recognition and classification is important. </p>
</li>
<li><p>activity based semantic mapping, relies on information about the activities of the agents around the ego vehicle. </p>
</li>
</ul>
<h2 id="Planning"><a href="#Planning" class="headerlink" title="Planning"></a>Planning</h2><h3 id="mission-planning"><a href="#mission-planning" class="headerlink" title="mission planning"></a>mission planning</h3><p>performed through graph search over a directed graph network, which reflects road/path network connectivity. </p>
<h3 id="behavioral-planning"><a href="#behavioral-planning" class="headerlink" title="behavioral planning"></a>behavioral planning</h3><p>decision making to ensure the vehicle follows any road rules and interacts with other agents in a conventional, safe manner. </p>
<h3 id="motion-planning"><a href="#motion-planning" class="headerlink" title="motion planning"></a>motion planning</h3><p>the process of deciding on a sequence of actions to reach a specified goal, typically based on avoiding colisions on a sequence of actions to reach a specified goal. </p>
<ul>
<li>combinatorial planning, builds a discrete representation of the real environment, and finds a complete solution. </li>
</ul>
<ul>
<li>sampling-based planning, utilizes a collision checking module to conduct discrete searching over samples drawn from the configuration space, which rely on random sampling of continuous spaces and the generation of  a feasible trajectory graph where feasibility is verified through collision checking of nodes and edges to connect these nodes .</li>
</ul>
<h3 id="planning-in-dynamic-environments"><a href="#planning-in-dynamic-environments" class="headerlink" title="planning in dynamic environments"></a>planning in dynamic environments</h3><ul>
<li><p>decision making structures for obstacle avoidance </p>
<p>  to monitor regions along the intended path for potential obstacle collisions, where these regions are labeled as “critial zones”, and checking against the trajectories of all nearby vehicles to determine a “time to collision”. </p>
</li>
</ul>
<ul>
<li>planning in space-time </li>
</ul>
<ul>
<li><p>control space obstacle represnetations </p>
<p>  rather than checking for collisions directly in robot’s configuration space, directly plan in the control space by prohibiting certain control actions which are predicted to lead to collision.</p>
</li>
</ul>
<h3 id="incremental-planning-and-replanning"><a href="#incremental-planning-and-replanning" class="headerlink" title="incremental planning and replanning"></a>incremental planning and replanning</h3><p>a means of incrementally generating sub-goals, a new plan is generated as often as a new sub-goal is defined. iteratively replanning to generate new solution trajectories presents a potential opportunity to carry over knowledge from previous planning iterations to subsequent planning iterations.</p>
<h2 id="Control"><a href="#Control" class="headerlink" title="Control"></a>Control</h2><h3 id="feedback-control"><a href="#feedback-control" class="headerlink" title="feedback control"></a>feedback control</h3><p>e.g. proportional-integral-derivative(PID) controller, the limitation of feedback-only control, is has delayed response to errors.</p>
<h3 id="model-predictive-control"><a href="#model-predictive-control" class="headerlink" title="model predictive control"></a>model predictive control</h3><h3 id="trajectory-generation"><a href="#trajectory-generation" class="headerlink" title="trajectory generation"></a>trajectory generation</h3><ul>
<li><p>combined trajectory generation and tracking </p>
</li>
<li><p>separate trajectory generation and tracking </p>
<p>  1) trajectory generation, to find an entire control input, which corresponds to some desired state trajectory. can be dealed as a two point boundary value problem, with a starting state and a final state. </p>
<p>  1.1) sensor based trajectory generation</p>
<p>  1.2) dynamic based trajectory generation </p>
</li>
</ul>
<h3 id="trajectory-tracking"><a href="#trajectory-tracking" class="headerlink" title="trajectory tracking"></a>trajectory tracking</h3><ul>
<li><p>geometric methods</p>
<p>  pursues a point along the path that is located at a certain lookahead distance away from the vehicle’s current position. the input is waypoints, rather than smooth curves. </p>
</li>
<li><p>model based methods </p>
<p>  kinematic model based controllers performs well at low speed applications, but the error increase as the vehicle speed and curvature rate of path increases.</p>
<p>  dynamic model based controllers performs well for higher speed driving applications</p>
</li>
</ul>
<h2 id="summary"><a href="#summary" class="headerlink" title="summary"></a>summary</h2><p>this is an overview of self-driving car system. From a job-hunting view, the algorithms details are more important and better with some practial experience.</p>
<p><a href="https://www.mdpi.com/2075-1702/5/1/6/htm" target="_blank" rel="external">paper link</a> </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/27/book-reading-第一本无人驾驶技术书/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/27/book-reading-第一本无人驾驶技术书/" itemprop="url">book reading: 第一本无人驾驶技术书</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-27T05:39:51-04:00">
                2019-03-27
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/27/book-reading-第一本无人驾驶技术书/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/27/book-reading-第一本无人驾驶技术书/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="一些方案"><a href="#一些方案" class="headerlink" title="一些方案"></a>一些方案</h2><ul>
<li>基于gps/imu融合的定位</li>
<li>基于视觉的定位</li>
<li>基于点云的定位</li>
<li>基于视觉的物体识别与跟踪</li>
<li>基于lidar的物体识别与跟踪</li>
</ul>
<h2 id="基于点云的定位"><a href="#基于点云的定位" class="headerlink" title="基于点云的定位"></a>基于点云的定位</h2><p>简化概率问题：已知t_0 时刻的点云信息，以及t_1时刻，无人车位置的先验概率分布，求无人车位置的概率分布。</p>
<p>贝叶斯法则:</p>
<p>  $$ P(X_t) =  P(Z_t | X_t ) \cdot \ \vec(P(X_t)) $$ </p>
<p>$\vec(P(X_t))$ 是汽车当前位置的概率分布； $P(Z_t | X_t)$ 是当前位置下观察的点云概率分布。</p>
<h2 id="ROS-based-system"><a href="#ROS-based-system" class="headerlink" title="ROS based system"></a>ROS based system</h2><p>ROS是基于消息传递通信的、分布式多进程框架。Topic发布、接受是一种异步通信方式； Service服务是一种利用同步通信请求/回复交互的分布式系统。</p>
<h2 id="传感器"><a href="#传感器" class="headerlink" title="传感器"></a>传感器</h2><h3 id="Lidar"><a href="#Lidar" class="headerlink" title="Lidar"></a>Lidar</h3><ul>
<li>环境感知： 通过雷达扫描汽车周围的环境3d模型。运用相关算法比对上一帧和下一帧，从而匹配环境中的其他车辆或行人</li>
<li>slam定位：实时扫描地图，与高精地图中的特征物比对，实现导航及精准定位。</li>
<li>供应商： Velodyne </li>
</ul>
<h3 id="毫米波雷达"><a href="#毫米波雷达" class="headerlink" title="毫米波雷达"></a>毫米波雷达</h3><ul>
<li><p>可用工作频段 24ghz、77ghz, 波长 1 ～ 10 mm。77ghz物体分辨率较24ghz提高2～4倍，测速和测距精度提高3~5倍。电磁波频率越高，距离和速度的检测解析度越高。</p>
</li>
<li><p>供应商</p>
<p>   射频芯片：24ghz成熟供应（博世、飞思卡尔）； 77ghz没有对中国开放</p>
<p>   雷达数据处理芯片：恩智浦，意行半导体</p>
</li>
</ul>
<h3 id="摄像头"><a href="#摄像头" class="headerlink" title="摄像头"></a>摄像头</h3><ul>
<li>高动态</li>
<li>中低像素</li>
<li>适合温度范围 -40 ～ 80 度</li>
<li>防磁抗振 </li>
<li>寿命长</li>
</ul>
<h2 id="计算平台"><a href="#计算平台" class="headerlink" title="计算平台"></a>计算平台</h2><ul>
<li><p>计算单元与计算负载</p>
<p>  GPU执行卷积任务最有效，DSP执行特征提取最有效。</p>
</li>
<li><p>移动端soc架构</p>
<p>  I/O子系统与前端传感器交互；DSP负责图像处理流以进行特征提取；由GPU进行目标识别和其他深度学习任务；由一个多核CPU完成规划、控制和互动的子任务；由FPGA进行动态重构以分时共享的方式完成传感器数据压缩上传，物体跟踪和流量预测等。计算部件和I/O部件之间通过共享内存进行数据通信。</p>
</li>
</ul>
<h2 id="系统安全"><a href="#系统安全" class="headerlink" title="系统安全"></a>系统安全</h2><p>安全问题：强磁场干扰IMU；假大功率的gps信号；干扰激光雷达，在无人处周围放置强反光物；干扰高精地图的更新； ros系统劫持、通信修改。obd-2入侵， 充电桩入侵，车载cd入侵，蓝牙入侵。</p>
<h2 id="Spark与ROS的分布式模拟平台"><a href="#Spark与ROS的分布式模拟平台" class="headerlink" title="Spark与ROS的分布式模拟平台"></a>Spark与ROS的分布式模拟平台</h2><p>基于合成数据的模拟；基于真实数据回放的模拟。</p>
<h2 id="高精地图"><a href="#高精地图" class="headerlink" title="高精地图"></a>高精地图</h2>
          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/26/未来5年在哪里-5/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/26/未来5年在哪里-5/" itemprop="url">未来5年在哪里(5)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-26T03:53:04-04:00">
                2019-03-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/26/未来5年在哪里-5/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/26/未来5年在哪里-5/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="深圳之行"><a href="#深圳之行" class="headerlink" title="深圳之行"></a>深圳之行</h2><p>来深圳前只说见见朋友。而工作在这里的年轻人，都在讲述着让我陷入焦虑的故事。对国内的年轻人、行业选择、工作地点有了接近真实的了解。可能是朋友的分布在各个地方不同，深圳的年轻人最明显的感受是干劲儿足，而且对未来充满了希望。没有白走的路。</p>
<p>在美帝的最后一段时间有接触面试：阿里巴巴人工智能实验室、美团无人车、硅谷的自动驾驶创业团队， zoox, cruise, tosimple, drive.ai，当时只是隐约感觉不适应。工作内容、技能要求，都不在我的雷达里。</p>
<p>过去来讲，是选择性忽略行业常识。对互联网人、金融人的自信、高薪比较回避，也因为在国外相对生活无忧、高新安逸的环境。而这些行业领头平台对个人成长的价值，也被忽略了。当用常识去看世界，对互联网平台的成长是非常感兴趣。</p>
<p>实际上，平均2～3年，在华为、腾讯等国内领军互联网平台的年轻人可以独立带项目了。相比，在国外工作的头三年，大部分还在为身份焦虑，或者假期哪里玩而晒朋友圈。</p>
<p>站在快速迭代的行业ceo角度讲，比如互联网、金融行业，都越来越校招，使用应届毕业生，其创造的价值和投入的成本确实更划算。除非有突出和无法复制的核心。所以，工作中一定要保持积累，否则离开了平台，又缺少技能积累，很快失去竞争力。甚至一些“曲线救国”的规划，会抓紧到大平台“偷学”完成，然后迅速跳更期望的位置。</p>
<p>回国的朋友说，国内同龄年轻人，对行业技能的积累，比国外回来的要高一两个层次。记得两年前的一个中午，站在上海张江高科园区，看到黑压压的年轻人涌出办公楼，那一刻的感受是蛮绝望的。当时我兴庆不在国内工作。没意识到危机，就先被危险吓到～</p>
<h2 id="行业分布"><a href="#行业分布" class="headerlink" title="行业分布"></a>行业分布</h2><p>在美帝的几年，对美帝的产业分布会有些认识。比如，汽车制造业在密西根；石油能源行业在德州；互联网、智能、医疗等在硅谷湾区、波士顿等。对国内的行业分布，也是这次来深圳才慢慢听到的。之前对地域的认识只有南北方区别。北京是互联网、外企聚集地；上海和周边也是外企聚集地，特别汽车行业的产业链全覆盖；深圳广州从加工制造起身，电子硬件产业链完整，也有腾讯、华为等互联网链条。成都、重庆、武汉也集中一批软件产业和汽车制造业。</p>
<p>为什么一定要到行业top的公司去实践，想必是一个常识。虽然平台是带不走的，这里面的管理文化、优秀的同事、解决的行业问题、做的产品、见到的客户等等都会烙印在个人身上。</p>
<p>为什么一定要去top的行业去实践，也是同样的常识。对于没有明确兴趣和职业方向的年轻人，top的行业是能帮忙迅速完成鉴定的。这就比如年轻人当初一定要去一线大城市，就是想去见识下，不为别的。是骡子是马，在top行业溜一圈就有底了。</p>
<h2 id="产品方向"><a href="#产品方向" class="headerlink" title="产品方向"></a>产品方向</h2><p>过去几年在技术岗没有明显成就，所以快30岁就考虑转产品岗位了。这真是一个危险的信号。以前的解读是，反正技术不会干一辈子，总要横向扩展。实际上，相比单纯的技术方向如果不出众，转产品岗只会越走越低。因此，年纪的危机感也加重了。不再像一个初出茅庐的年轻人愿意去挑战，而是求安稳的心态。越缺少专注，越容易被不重要的问题困扰。记得刚回来找工作，我对薪资待遇是念念不忘，而不在能做成什么事。现在要保持一个学习者同时给企业创造价值的心态。</p>
<p>很多朋友了解我不到30岁，都觉得有些问题考虑的过早了。应该继续放手搏一搏。长线来讲，现在还是积累的年纪。选择回避，去一个非技术的岗位、去一个二线城市、甚至换一个不知深浅的行业，都不是明智的。</p>
<p>也不要思考这种弱智问题，诸如，35岁以后干什么呢？ 以前很擅长谈vision, 没有行业积累，不能低下去踏实做事情，会是回国就业的障碍。</p>
<pre><code>阿里巴巴，2018年统计员工9万，其中85%月薪资在20k ～ 50k

腾讯，2017年统计员工人数4万，其中88%月薪资在20k~50k

百度，2017年统计员工人数近4万，其中70%月薪资在20k~50k

滴滴，2019年统计员工人数为1.3万，其中71%月薪资在20k～50k

华为，2017年统计员工人数为17万，其中55%月薪资在20k~50k
</code></pre><p>国内top行业和行业top公司的薪资情况，half million的样子。回归常识吧。</p>
<p>参考，OEM自动驾驶研发工程师薪资（年）</p>
<pre><code>长城（保定）  30万 + 
长安（重庆）  40万 + 
吉利（杭州）  40万 +
广汽（广州）  35万 + 
</code></pre><h2 id="公司性质"><a href="#公司性质" class="headerlink" title="公司性质"></a>公司性质</h2><p>主机厂、外资供应商、国内领头互联网企业、创业团队，也都有接触到了。从最开始很happy有主机厂的offer，到慢慢听到猎头讲，国内oem的尿性。领头互联网内部也是小股作战，同时又有平台的优势；优秀的创业团队比较吸引资本，都非常棒。相比，外资供应商是体系成熟、个人自由、但核心内容不一定在大陆，所以适合做跳板，迅速完成积累然后跳出。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/18/未来5年在哪里-4/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/18/未来5年在哪里-4/" itemprop="url">未来5年在哪里(4)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-18T11:41:44-04:00">
                2019-03-18
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/18/未来5年在哪里-4/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/18/未来5年在哪里-4/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>如果衣食无忧、每天和快活的人在一起，谁还去努力奋斗呢。 –  by me </p>
<p>从北京回来写下： 在一线城市的优势就是对政策的敏感，能够提早做布局。相比，三四线更多是跟随和被影响。</p>
<p>上层可以很自然向下扩展，但下层很难上去。不论是产品、概念、服务。比如，提到英语培训机构，会想到 新东方，而不会是 钟祥少儿英语。 新东方从北京发展到武汉市自然而然的；但定位在钟祥的少儿英语，甚至不会逆向到荆门。其他包括互联网服务业、造车新势力等等。</p>
<p>起点决定了发展上升空间。</p>
<p>底层会有很多直接面向终端人群的利弊。比如一个家电品牌在某村的供销商，必然跟当地人很熟。只是在中国只要发展到一定阶段，就会碰到“天花板”。造成这些地方（下层）的生意，处于一个“长不大也饿不死”的阶段。</p>
<p>底层的生意也容易受<a href="https://zjli2013.github.io/2019/01/13/未来五年在哪里（3/" target="_blank" rel="external">壁垒保护</a>，毕竟除了概念、体制可以低成本渗透，企业运营管理要做到三四线是相当沉重的。所以，三四线可以肆无忌惮地复制品牌，或者同类小生意林立。比如，服装、餐饮等等。</p>
<p>之前考虑，为什么中国没有像Mc Donald’s, Wendy’s的全国连锁店，只看到了模式复制的成本。其实更深应该是两国体制不同。美国整体运营环境较为平坦；而中国是有上下层的。政治模式决定经济模式，所以，美国的品牌容易横向扩展，标准在哪里都可以建立；而中国的品牌都需要从上到下，游戏规则只会在上层建立。</p>
<p>一些不安分的理想青年，大约不想只参与游戏，被割韭菜，所以才要努力在现有的格局上捅窟窿。昌兄说，有朝一日，中国如美国，都是百年老店了，年轻人也就会逆来顺受，接受命运的安排，兴许人生也更轻松。</p>
<p>在三四线做点小生意，不求闻达于诸侯，苟且偷生不好吗？ 作为一个无产者，犯不上考虑这些问题。作为有产者，如何保证财产安全，就是底层忧虑的根源。对个人产权缺乏保护是任何奋斗且成功的青年都会担心的。而唯一的途径，就是通过更多途径赚钱，积累财富。雪球越滚越大，像一只无形的鞭子。受益者也许是国家，兴百姓苦，亡百姓苦。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/03/apollo-planning-module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/03/apollo-planning-module/" itemprop="url">apollo planning module</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-03T08:30:43-05:00">
                2019-03-03
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/03/apollo-planning-module/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/03/apollo-planning-module/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://yq.aliyun.com/articles/691219" target="_blank" rel="external">决策规划</a>, 根据导航信息及车辆的当前状态，在有限时间内，计算出一条合适的轨迹。</p>
<h2 id="Lattice-Planner"><a href="#Lattice-Planner" class="headerlink" title="Lattice Planner"></a><a href="https://mp.weixin.qq.com/s/YDIoVf20kybu8JEUY3GZWg?spm=a2c4e.11153940.blogcont691219.30.78693edf59tdSa" target="_blank" rel="external">Lattice Planner</a></h2><ul>
<li>Sample candidate trajectories </li>
<li>Assign costs </li>
<li>Select lowest-cost trajectory, to satisfy constraint &amp; collision check in each cycle</li>
<li>Output </li>
</ul>
<h3 id="Frenet-坐标"><a href="#Frenet-坐标" class="headerlink" title="Frenet 坐标"></a>Frenet 坐标</h3><p>定义沿路面的一条光滑参考线（路面中心线）， 汽车位置坐标由纵向偏移量，横向偏移量表示。纵向坐标，由汽车质心在参考线上的投影点，到参考线起点的长度s表示；横向坐标， 由投影点到汽车质心的距离l表示。</p>
<p>在Frenet坐标下，汽车的朝向、速度、加速度可由横、纵向偏移量的一阶导、二阶导表示。另外，由车辆动力学控制方程可知，横向的偏移量变化率与纵向速度相关，即横向运动是由纵向运动诱发的。</p>
<h3 id="生成轨迹"><a href="#生成轨迹" class="headerlink" title="生成轨迹"></a>生成轨迹</h3><p>分别由初始（当前）横向、纵向的状态信息（位置、速度、加速度），和下一时刻的横向、纵向状态信息（位置、速度、加速度），可以得到Frenet坐标下的一个轨迹点。通过一系列的时间点t0，t1, … tn, 可以得到一系列的轨迹点p0, p1, … pn， 即形成一条轨迹。</p>
<h3 id="轨迹集合采样"><a href="#轨迹集合采样" class="headerlink" title="轨迹集合采样"></a>轨迹集合采样</h3><p>轨迹采样，本质上是通过在解空间随机布点，然后贪婪搜索，筛选最低cost function value的点，即为可行轨迹。</p>
<p>横向偏移量由动力学方程可由纵向偏移量唯一决定，即从控制方程上，每个scenario可以变成由纵向偏移量当唯一自变量的控制方程，从而保证有唯一最优解或者无解。但实际上，由纵向偏移量唯一表示的控制方程，需要满足不同scenario的约束条件，即一个带约束条件的优化问题。随机算法是一个鲁棒性很强的方法，而且大部分情况下，至少可以得到一个可行解。apollo中横向轨迹、纵向轨迹分别采样。</p>
<p>apollo的横向轨迹的采样，由内部自定义三种横向偏移量： -0.5， 0， 0.5； 同时，设计到达这些横向偏移量的纵向位移： 10， 20， 40， 80. 两层循环即可得到一个轨迹集合。由此定义的横向轨迹不一定符合运动学、动力学约束。</p>
<p>apollo的纵向轨迹的采样，考虑巡航、跟车、超车、停车等scenario。</p>
<p>比如，巡航场景，通过两层循环采样。外层循环将速度从零到速度上限按等间距均匀遍历，内层循环由1s-8s均匀遍历。对于停车的场景，末状态的速度、加速度是0.</p>
<h3 id="ST-Graph"><a href="#ST-Graph" class="headerlink" title="ST-Graph"></a>ST-Graph</h3><p>横坐标是时刻，纵坐标是障碍车的车头、车尾的位置。st图将描绘障碍车进入当前车道到离开当前车道所占据的位置区域。自驾车必须确保与障碍车所占据位置有重合。跟车，即在被占区域的下方，或超车，即在被占区域的上方。</p>
<p>由跟车或超车，即可采样各个时刻的纵向偏移量，然后同理横向偏移量采样，形成纵向轨迹集合。</p>
<h3 id="轨迹cost"><a href="#轨迹cost" class="headerlink" title="轨迹cost"></a>轨迹cost</h3><p>轨迹规划的约束条件： 达到目的、 横向偏移代价（尽量沿着道路中心行驶）、碰撞代价、符合交规、平稳舒适（横向加速度代价）、 纵向加速度代价（激烈加速）、向心加速度代价（转弯场景）。</p>
<p>对于换道场景，对当前车道、目标车道的参考线做一次采样，并找到最低cost的轨迹。可以设计换道cost 。</p>
<h2 id="EM-planner"><a href="#EM-planner" class="headerlink" title="EM planner"></a>EM planner</h2><p>expectation maximum(EM) ， <a href="https://blog.csdn.net/yuxuan20062007/article/details/83629595" target="_blank" rel="external">最大期望算法</a>，在概率模型中寻找参数最大似然估计或最大后验估计，其概率模型依赖于无法观测的隐性变量。</p>
<p>首先，计算期望（e)， 利用对隐藏变量的现有估计值，计算其最大似然估计值；然后，最大值m， 最大化在e步上求的的最大似然值来计算参数的值。step-2 的参数被用于下一个 step-1 的计算。</p>
<p>em planner 会迭代对路径path、速度velocity进行优化。基于当前步的path和对其他运动物体的预测，优化当前步的速度；然后基于这个新的速度，再优化path。迭代直到收敛。</p>
<p>EM Planner 相比 Lattice Planner，利用了更多当前时间步的状态信息，在每个local timestep 都得到一个可行解。一系列的局部解，相当于弱形式，如果解空间存在可行解，局部解的迭代最终也将给出系统的可行解</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"></div><div class="line"><span class="function"><span class="keyword">bool</span> <span class="title">Plan</span><span class="params">(<span class="keyword">const</span> common::vehicle_state::VehicleState &amp;vehicle_state, </span></span></div><div class="line"><span class="keyword">const</span> <span class="keyword">bool</span> is_on_auto_mode,</div><div class="line"><span class="keyword">const</span> <span class="keyword">double</span> publish_time, </div><div class="line"><span class="built_in">std</span>::<span class="built_in">vector</span>&lt;common::TrajectoryPoint&gt;</div></pre></td></tr></table></figure>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/03/02/apollo-control-module/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/03/02/apollo-control-module/" itemprop="url">apollo control module</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-03-02T05:22:51-05:00">
                2019-03-02
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/03/02/apollo-control-module/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/03/02/apollo-control-module/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="纵向控制"><a href="#纵向控制" class="headerlink" title="纵向控制"></a><a href="https://blog.csdn.net/u013914471" target="_blank" rel="external">纵向控制</a></h2><p>通过控制刹车、油门实现对车速的控制。由一个级联控制器和标定表构成。级联控制器包括：位置PID闭环控制器，  速度PID闭环控制器。标定表即速度-加速度-刹车-油门命令 标定表。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"></div><div class="line">Status LonController::ComputeControlCommand(</div><div class="line">	<span class="keyword">const</span> localization::LocalizationEstimate *localization,  </div><div class="line">	<span class="keyword">const</span> canbus::Chassis *chassis, </div><div class="line">	<span class="keyword">const</span> planning::ADCTrajectory *planning_published_trajectory,</div><div class="line">	control::ControlCommand *cmd)</div></pre></td></tr></table></figure>
<p>其输出是油门\刹车命令cmd. </p>
<p><img src="/home/Documents/Blog/HexoBlog/source/_posts/apollo-control-module/lon_control.png" alt="avatar"></p>
<h3 id="位置PID闭环控制器"><a href="#位置PID闭环控制器" class="headerlink" title="位置PID闭环控制器"></a>位置PID闭环控制器</h3><p>输入变量：期望位置 + 当前实际位置 </p>
<p>输出变量：速度补偿量</p>
<h3 id="速度PID闭环控制器"><a href="#速度PID闭环控制器" class="headerlink" title="速度PID闭环控制器"></a>速度PID闭环控制器</h3><p>输入变量：速度补偿 + 当前位置-速度偏差</p>
<p>输出变量：加速度补偿量</p>
<h3 id="速度-加速度-刹车-油门命令-标定表"><a href="#速度-加速度-刹车-油门命令-标定表" class="headerlink" title="速度-加速度-刹车/油门命令 标定表"></a>速度-加速度-刹车/油门命令 标定表</h3><p>输入变量： 加速度补偿量 +  规划驾速度， 车速</p>
<p>输出变量： 油门／刹车控制量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> LonController::ComputeLongitudinalErrors(</div><div class="line">	<span class="keyword">const</span> TrajectoryAnalyzer *trajectory_analyzer, </div><div class="line">	<span class="keyword">const</span> <span class="keyword">double</span> preview_time ,</div><div class="line">	SimpleLongitudinalDebug *debug)</div></pre></td></tr></table></figure>
<p>CarSim/Simulink 与 apollo 连结 ？ </p>
<h2 id="横向控制"><a href="#横向控制" class="headerlink" title="横向控制"></a>横向控制</h2><p>通过调节方向盘转角实现对航向的控制，由一个前馈控制器和反馈控制器组合，实现车辆动力学模型和lqr 模型。</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Status LatController::ComputeControlCommand(</div><div class="line">	<span class="keyword">const</span> localization::LocalizationEstimate *localization,</div><div class="line">	<span class="keyword">const</span> canbus::Chassis *chassis,</div><div class="line">	<span class="keyword">const</span> planning::ADCTrajectory *planning_published_trajectory,</div><div class="line">	control::ControlCommand *cmd)</div></pre></td></tr></table></figure>
<p><img src="/home/Documents/Blog/HexoBlog/source/_posts/apollo-control-module/lat_control.png" alt="avatar"></p>
<h3 id="前馈控制器"><a href="#前馈控制器" class="headerlink" title="前馈控制器"></a>前馈控制器</h3><p>输入变量：道路曲率</p>
<p>输出变量：方向盘前馈控制量</p>
<p>前馈控制变量实现补偿道路曲率对稳态误差的影响。</p>
<h3 id="反馈控制器"><a href="#反馈控制器" class="headerlink" title="反馈控制器"></a>反馈控制器</h3><p>输入变量： 期望航向角</p>
<p>输出变量： 方向盘反馈控制量</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// update status matrix </span></div><div class="line"><span class="keyword">void</span> LatController::UpdateStateAnalyticalMatching(</div><div class="line">	SimpleLateralDebug *debug)</div><div class="line"></div><div class="line"><span class="comment">// cal lat error </span></div><div class="line"><span class="keyword">double</span> LatController::ComputeLateralErrors(</div><div class="line">	<span class="keyword">const</span> <span class="keyword">double</span> x, </div><div class="line">	<span class="keyword">const</span> <span class="keyword">double</span> y,</div><div class="line">	<span class="keyword">const</span> <span class="keyword">double</span> theta,</div><div class="line">	<span class="keyword">const</span> <span class="keyword">double</span> linear_v ,</div><div class="line">	<span class="keyword">const</span> <span class="keyword">double</span> angular_v, </div><div class="line">	<span class="keyword">const</span> TrajectoryAnalyzer &amp;trajectory_analyzer,</div><div class="line">	SimpleLateralDebug *debug)</div><div class="line"></div><div class="line"><span class="keyword">void</span> LatController::UpdateMatrix() </div><div class="line"></div><div class="line"><span class="keyword">void</span> common::math::SolveLQRProblem()  <span class="comment">// gain matrix </span></div><div class="line"></div><div class="line">steer_angle =  steer_angle_feedback + steer_angle_feedforward</div></pre></td></tr></table></figure>
<p>控制模块更新cmd 后，发送给canbus模块。 </p>
<h2 id="MPC-模型"><a href="#MPC-模型" class="headerlink" title="MPC 模型"></a>MPC 模型</h2><p>mpc的实现依赖于过程的动态模型。对时域内，每个当前时刻进行优化，求取每个时刻的最优控制解，从而得到整个时域的优化解。</p>
<ul>
<li>基于线性化的预测</li>
</ul>
<p>实际系统状态-控制方程（系统状态变量、控制变量）具有时域非线性（二次项等）。首先对该系统进行线性近似，从而可以实现通过当前状态变量、控制变量对下一个时刻系统状态和控制的预测。</p>
<ul>
<li>滚动优化</li>
</ul>
<p>设计符合约束条件的目标函数，为状态、控制的离散的能量二次方程。优化的目标就是在每个时刻，寻找最优控制变量，使得目标函数最小。MPC相当于给出每个时刻的局部最优控制值，整个时域的最优控制就是一个控制序列。</p>
<ul>
<li>控制更新</li>
</ul>
<p>每个优化的输出即每个时步的控制增量，用于更新当下时步的系统控制变量。</p>
<h2 id="LQR-模型"><a href="#LQR-模型" class="headerlink" title="LQR 模型"></a>LQR 模型</h2><p>lqr 给出时域系统的全局最优解， 其目标函数是积分函数。相比较，lqr 相当于加权伽辽金方法，给出弹性体的全局最优解，对应强形式的控制方程，解空间非常狭小，甚至不存在。而mpc 相当于有限元方法，给出弹性体每个单元的局部解，对应弱形式的控制方程，每个单元的解空间span可张。理论上弱形式在极限情况给出的解就是强形式的解。</p>
<p>数值方法上，lqr相当于直接法，mpc相当于迭代法。直接法给出控制方程的唯一真实解；迭代法给出近似解，但近似解可收敛到系统的真实解。</p>
<h2 id="车辆模型"><a href="#车辆模型" class="headerlink" title="车辆模型"></a>车辆模型</h2><p>运动学模型给出车辆纵向控制变量，即车辆模型刚体质心参考点及航向角的控制方程；动力学模型给出车辆横向控制变量。</p>
<p>由运动学和动力学模型给出了整车状态-控制方程，采用mpc or lqr 算法求解控制变量，即实现车辆控制。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/26/自驾初创团队/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/26/自驾初创团队/" itemprop="url">自驾初创团队</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-26T09:25:39-05:00">
                2019-02-26
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/26/自驾初创团队/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/02/26/自驾初创团队/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <table>
<thead>
<tr>
<th>name</th>
<th>CEO</th>
<th>start-date</th>
<th>business</th>
<th>funding</th>
</tr>
</thead>
<tbody>
<tr>
<td>宏景智驾</td>
<td>刘飞龙(北美oem 背景）</td>
<td>2018-8</td>
<td>L4 Tier1供应商</td>
<td>天使轮 ¥4千万</td>
</tr>
<tr>
<td>赢彻科技</td>
<td>翟学魂</td>
<td>2018-9</td>
<td>临港物流</td>
<td>-</td>
</tr>
<tr>
<td>拓疆者</td>
<td>隋少龙（北美背景）</td>
<td>2018-4</td>
<td>无人挖掘机</td>
<td>-</td>
</tr>
<tr>
<td>驰加科技</td>
<td>王明彦（国内oem 背景）</td>
<td>2017-10</td>
<td>低成本后装解决方案</td>
<td>-  </td>
</tr>
<tr>
<td>plus ai</td>
<td>刘万千</td>
<td>2017-3</td>
<td>AI 方案？</td>
<td>-</td>
</tr>
<tr>
<td>纽励科技</td>
<td>徐雷（特斯拉）</td>
<td>2017—1</td>
<td>视觉方案 ？</td>
<td>-</td>
</tr>
<tr>
<td>momenta</td>
<td>曹旭东</td>
<td>2016-7</td>
<td>视觉方案</td>
<td>c轮 $2亿 </td>
</tr>
<tr>
<td>极木科技</td>
<td>祁卫（亿航）</td>
<td>2016-7</td>
<td>机器人方案</td>
<td>- </td>
</tr>
<tr>
<td>驭势科技</td>
<td>吴甘沙(intel)</td>
<td>2016</td>
<td>芯片方案 ？</td>
<td>-</td>
</tr>
<tr>
<td>易航智能</td>
<td>陈禹行（吉大）</td>
<td>2015-8</td>
<td>汽车动力学、控制软件</td>
<td>b轮 ¥2.2亿 </td>
</tr>
<tr>
<td>青飞智能</td>
<td>孙一飞（上交）</td>
<td>-</td>
<td>园区短距自驾解决方案</td>
<td>天使轮 ¥千万</td>
</tr>
<tr>
<td>环宇智行  李明（武大）</td>
<td>自驾解决方案</td>
<td>天使轮 ¥千万 </td>
</tr>
<tr>
<td>行深智能</td>
<td>安向京</td>
<td>-</td>
<td>自驾整体解决方案</td>
<td>- </td>
</tr>
<tr>
<td>畅行智能</td>
<td>张祖峰（苏州清华）</td>
<td>物流自驾解决方案</td>
<td>天使轮 ¥千万</td>
</tr>
<tr>
<td>图森未来</td>
<td>陈默</td>
<td>2015-8</td>
<td>自驾卡车、视觉、ai</td>
<td>d轮 $0.95亿 </td>
</tr>
<tr>
<td>纵目科技</td>
<td>唐锐</td>
<td>2013</td>
<td>环视adas供应商</td>
<td>c轮 ¥1亿</td>
</tr>
<tr>
<td>禾多科技</td>
<td>倪凯（清华）</td>
<td>2017-3</td>
<td>L3.5 自驾解决方案</td>
<td>a轮 $千万</td>
</tr>
<tr>
<td>牧月科技</td>
<td>杨庆雄（景驰）</td>
<td>2018-6</td>
<td>-</td>
<td>天使轮 ¥5千万</td>
</tr>
<tr>
<td>深兰科技</td>
<td>陈海波</td>
<td>2012-8</td>
<td>?</td>
<td>a+轮 ¥3亿</td>
</tr>
<tr>
<td>武汉光庭</td>
<td>朱敦尧</td>
<td>2011</td>
<td>智能网联</td>
<td>上汽并购</td>
</tr>
<tr>
<td>主线科技</td>
<td>张天雷</td>
<td>2017-3</td>
<td>港口卡车（天津港）</td>
<td>- </td>
</tr>
<tr>
<td>创昂tron</td>
<td>邓恒（国内oem 背景）</td>
<td>2018-4</td>
<td>天使轮 $百万 </td>
</tr>
<tr>
<td>畅风加行</td>
<td>？</td>
<td>2018-4</td>
<td>L3 解决方案</td>
<td>- </td>
</tr>
<tr>
<td>小马智行</td>
<td>楼天城</td>
<td>2016-12</td>
<td>ai ?</td>
<td>a+ 轮</td>
</tr>
<tr>
<td>智行者</td>
<td>韦忠亚</td>
<td>2015-5</td>
<td>？</td>
<td>b+ 轮</td>
</tr>
<tr>
<td>鹰驾科技</td>
<td>郑智宇</td>
<td>2015-8</td>
<td>adas 视觉软硬件</td>
<td>a轮 ¥千万</td>
</tr>
<tr>
<td>盟识科技</td>
<td>邱长伍</td>
<td>-</td>
<td>矿山、港口、园区自驾解决方案</td>
<td>-</td>
</tr>
<tr>
<td>飞步科技</td>
<td>何晓飞（滴滴）</td>
<td>2018-4</td>
<td>车载 ai 系统</td>
<td>-</td>
</tr>
<tr>
<td>文远知行</td>
<td>韩旭（百度）</td>
<td>-</td>
<td>-</td>
<td>a+$千万</td>
</tr>
<tr>
<td>拿森电子</td>
<td>陶喆</td>
<td>2016-3</td>
<td>汽车电控</td>
<td>b轮 $1亿</td>
</tr>
<tr>
<td>auto brain</td>
<td>李明喜</td>
<td>2017-5</td>
<td>自驾解决方案（长城合作）</td>
<td>- </td>
</tr>
<tr>
<td>踏歌智行</td>
<td>余贵珍（北航）</td>
<td>-</td>
<td>特定场景自驾解决方案</td>
<td>pre-a ¥千万</td>
</tr>
<tr>
<td>云天励飞</td>
<td>陈宁</td>
<td>-</td>
<td>视觉 ai 芯片</td>
<td>-</td>
</tr>
<tr>
<td>有光科技</td>
<td>朱积祥</td>
<td>-</td>
<td>图像方案</td>
<td>-</td>
</tr>
<tr>
<td>云洲智能</td>
<td>张云飞</td>
<td>-</td>
<td>无人船</td>
<td>c轮 ¥4亿</td>
</tr>
<tr>
<td>西井科技</td>
<td>谭黎敏</td>
<td>-</td>
<td>ai 芯片，智能医疗、港口</td>
<td></td>
</tr>
</tbody>
</table>
<p>自动驾驶供应链中，ai算法、芯片、传感器（毫米波、激光、相机）等创业公司不计，传统主机厂、供应商内部相关团队不计。独立的小股团队也不计。直接把自动驾驶解决方案当作团队vision的有将近40家公司，分别来自电子芯片、人工智能、传统主机厂等不同背景。</p>
<p>每年估计烧十几个亿，市场还是有很多热情。2019年也许会死掉很多。另外，对市场时机需要敏感。几个海龟团队都是2018年才开始的。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/22/apollo-self-driving-car/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/22/apollo-self-driving-car/" itemprop="url">apollo self driving car</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-22T09:22:31-05:00">
                2019-02-22
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/22/apollo-self-driving-car/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/02/22/apollo-self-driving-car/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="apollo-self-driving-car"><a href="#apollo-self-driving-car" class="headerlink" title="apollo self-driving car"></a>apollo self-driving car</h1><h2 id="HD-maps"><a href="#HD-maps" class="headerlink" title="HD maps"></a>HD maps</h2><p>where to define the center-meter fidelity level maps, with landmarks, and even the height dimension as well, which is used as the guiding map and also the global coordinate to locate the vehicle in the world.  </p>
<p>how to keep HD maps updated is a big invest. Baidu has hundreds service cars in China to collect the natural highway HD map data, even still to 2020. </p>
<h2 id="Localization"><a href="#Localization" class="headerlink" title="Localization"></a>Localization</h2><p>SLAM tech is a robot maping the world at the same time localizing itself in the world. with HD maps prepared first, self-driving car only need localize itself at every timestep. and the common idea is comparing a few local landmarks with the corresponding global landmarks, then transfer the local vehicle position to its global position in HD map.</p>
<h3 id="LiDAR-localization"><a href="#LiDAR-localization" class="headerlink" title="LiDAR localization"></a>LiDAR localization</h3><p> either based on the cloud points matching from continous timestamps; or calculating the error between the LiDAR points with the HD maps points; or based on the Karman filter, which give the highest possibility of the location of vehicle</p>
<p>always accessible but not easy to construct, especially requiring HD maps. </p>
<h3 id="Visual-localization"><a href="#Visual-localization" class="headerlink" title="Visual localization"></a>Visual localization</h3><p>based on particle filters, which give the most likely location of the vehicle.</p>
<h2 id="Perception"><a href="#Perception" class="headerlink" title="Perception"></a>Perception</h2><h3 id="detection-amp-amp-classification"><a href="#detection-amp-amp-classification" class="headerlink" title="detection &amp;&amp; classification"></a>detection &amp;&amp; classification</h3><p>where the object located, and classify it. detection CNN to find the object in the image; then use classification CNN to classify it. or use a combined CNN to detect and classify at same time.</p>
<h3 id="tracking"><a href="#tracking" class="headerlink" title="tracking"></a>tracking</h3><p>tracking helps when detection failed; also tracking helps to identity the object, so when objects overlapped in the image, still can tell which is which. </p>
<h2 id="Prediction"><a href="#Prediction" class="headerlink" title="Prediction"></a>Prediction</h2><h3 id="model-based-prediction"><a href="#model-based-prediction" class="headerlink" title="model based prediction"></a>model based prediction</h3><h3 id="data-driven-prediction"><a href="#data-driven-prediction" class="headerlink" title="data driven prediction"></a>data driven prediction</h3><p>after prediction, then generate the trajectory. </p>
<h2 id="Planning"><a href="#Planning" class="headerlink" title="Planning"></a>Planning</h2><p>transfer the world to graph, and find routings in the graph. routing is a global path, comparing to trajectory is the local way.</p>
<h2 id="Vehicle-control"><a href="#Vehicle-control" class="headerlink" title="Vehicle control"></a>Vehicle control</h2><p>linear quadratic regulator</p>
<p>PID </p>
<p>model predictive control</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/02/14/where-am-I-in-next-5-years-6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="David Z.J. Lee">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Serious Autonomous Vehicles">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2019/02/14/where-am-I-in-next-5-years-6/" itemprop="url">where am I in next 5 years(6)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2019-02-14T23:23:11-05:00">
                2019-02-14
              </time>
            

            

            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/14/where-am-I-in-next-5-years-6/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/02/14/where-am-I-in-next-5-years-6/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>things changes faster than I expected, already in China for two weeks. The first few days with family, that was precious, and the last spring festival at home was 5 years ago. </p>
<h2 id="life-in-China"><a href="#life-in-China" class="headerlink" title="life in China"></a>life in China</h2><p>I am searching jobs in China now, the recruiters are highly efficient. almost in 24hrs, a reply return; and they prefer wechat rather than email, Liepin ranther LinkedIn. on the other hand, I went to tongji hosptial at Wuhan for a doctor appoitment, but stay in the line waiting most time. People are everywhere, even in a third-class city, like my hometown, I can only find two caffe shop to sit down and use the free wifi; the skyline buildings are everywhere, the evening scene feel like in the movie: Matrix. </p>
<p>in USA, I never touch the real China, which is attracting but concerned. As many of my friends in USA, we always talking about China, but never take a move back to China. Till the moment I stand in China, things are real. </p>
<p>In general, if people looking for a stable middle-class, USA definitely is a better choice, with few career pressure, 8 hrs a day, 20 days PTO a year, large house with green grass, and income is about 2 times highly as the same engineering in China, without considering 996 in China.</p>
<p>people back to China must think big, rather than looking for a stable income.</p>
<h2 id="self-driving-in-China"><a href="#self-driving-in-China" class="headerlink" title="self-driving in China"></a>self-driving in China</h2><p>OEM level: Changcheng, Audi, Volkswagen, Geely, xiaopeng, Beiqi, and many names I few heared before, are investing in new energy, intelligent vehicles, and self-driving cars and expending, the market sounds high to hell. there are about 500 start-ups focusing on component supply chain, e.g.  in-vehicle sensors, network communication infrastructure, platform solutions, AI algorithms to chips design, specilized scenario applications(mining, seaport, airport, logistics, warehousing, city bus, city-cleaners) </p>
<p>it was the best of times, it was the worst of times. many start-up companies will die so sure, but the market is the training course for next BIG.</p>
<p>The second half of 2018 is my time to feel  everything is accelerated. </p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.jpg"
               alt="David Z.J. Lee" />
          <p class="site-author-name" itemprop="name">David Z.J. Lee</p>
           
              <p class="site-description motion-element" itemprop="description">what I don't know</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives/">
                <span class="site-state-item-count">75</span>
                <span class="site-state-item-name">posts</span>
              </a>
            </div>
          

          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">13</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
                <a href="https://github.com/ZJLi2013" target="_blank" title="GitHub">
                  
                    <i class="fa fa-fw fa-github"></i>
                  
                  GitHub
                </a>
              </span>
            
              <span class="links-of-author-item">
                <a href="https://www.linkedin.com/in/zhengjia13/" target="_blank" title="LinkedIn">
                  
                    <i class="fa fa-fw fa-globe"></i>
                  
                  LinkedIn
                </a>
              </span>
            
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">David Z.J. Lee</span>
</div>


<div class="powered-by">
  Powered by <a class="theme-link" href="https://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.1"></script>



  
  

  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.1"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.1"></script>



  


  

    
      <script id="dsq-count-scr" src="https://zjlee.disqus.com/count.js" async></script>
    

    

  




	





  








  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

</body>
</html>
